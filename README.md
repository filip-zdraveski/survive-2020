# Проект по Визуелно програмирање - Survive 2020

Во изработката на овој проект учествуваа:
- Филип Здравески 171071
- Филип Трајковски 171005
- Марта Карличиќ 171138

## Објаснување на играта
Инспирирани од тековната ситуација, за нашата игра одбравме тема која е поврзана со COVID-19. Јунакот на нашата игра, Негативен, движејќи се во било која насока, има за цел да собере што повеќе поени (во вид на дезинфекциски средства) за да може да му се овозможи излез од нивото и премин кон следното. На теренот низ кој се движи се наоѓаат луѓе заразени со COVID-19, чиј радиус претставува опасна зона, па принуден е да ги избегнува за да не стане Позитивен. Заразените се движат од десниот крај на екранот, кон лево (еднонасочно). Од левата страна, како тајмер на самото ниво, пополека се движи Темнината (кон десно) и доколку го стигне нашиот јунак - тој губи. Исто така, ќе изгуби доколку три пати се удри во некој од заразените. Дополнително, на теренот повремено се појавуваат заштитни маски, како еден вид на power-up кој трае определено време, и истите му овозможуваат слободно да се движи низ заразените, без и тој да се зарази. Играта е составена од 5 нивоа.

## Решение на проблемот
За реализација на играта се фокусиравме на неколку делови:
* Креирање на главниот прозорец во кој ќе се одвива играта
* Почетно мени, опис на играта и одбирање на ниво
* Креирање на нивоа и прогресија низ истите
* Креирање на цел
* Следење на поени и животи на херојот
* Имплементација на сите елементи на играта: херој, заразени, темнина, дезинфекциски средства (поени) и маски (power-ups)
* Овозможување на исцртување, движење, како и колизија нa претходните елементи
* Додавање функционалност за пауза, зачувување на состојбата на играта и отворање на веќе зачувана игра

Прозорецот во кој се одвива играта (Game), менијата (Menu, LevelMenu, HowToPlay), прозорците кои покажуваат пораки за успешно/неуспешно завршување на дадено ниво (CustomMessageBox), пауза (Pause) - сите овие ги претставивме како Windows Forms, додека преку класи ги имплементиравме секоја од компонентите на играта: ниво (Level), херој (Hero), препреки (Darkness и SickPerson), маски(Mask), поени (Disinfectant) и цел (Goal).
Генерално, сите форми се со фиксна големина, без ControlBox, и се појавуваат централно на екранот, соодветно стилизирани да одговараат со контекстот на темата.
Во однос на класите, карактеристична е класата Level во која се специфицираат карактеристиките на сите 5 нивоа. Конкретно, со менување на ниво, динамички се менува и брзината на движење на темнината и заразените, како и интервалите на појавување на заразените, дезинфекциските средства и маските. За да го овозможиме ова, во Level чуваме листа од објекти од секоја од пречките, која ја пополнуваме со рандом задавање на координати на објектите, а во Game креиравме соодветни тајмери (MaskTimer, DisinfectantTimer, DarknessTimer, SickPersonSpawnTimer и SickPersonMoveTimer), при што на Timer_Tick event-от се повикува соодветната функција за нивно придвижување или позиционирање. За разлика од пречките, целта (куќичката) е поставена на фиксна позиција и таа не се менува во понатамошните нивоа. 
Движењето на херојот се симулира со зголемување/намалување на неговите X и Y координати и истото се одвива при Game_KeyDown event-от (притискање на една од четирите стрелки), па потребно е да се проверат областите кон кои се движи, односно да се провери дали во негова непосредна близина се наоѓа маска, дезинфекциско средство, или пак е во опасност од колизија со заболен човек или темнината. За таа цел креиравме три функции:
* **MoveSickPerson()** – ги поместува координатите на херојот за 10 во соодветната насока и притоа проверува, ако херојот носи маска – никој ништо не му може, односно слободно може да си се движи, но ако не носи маска, проверуваме дали се судрил во некој заболен човек (ова го правиме со пресметување на Евклидовото растојание помеѓу координатите на пречката и координатите на нашиот херој) и соодветно му ги намалуваме животите. Штом истите се истрошат, нивото се оневозможува, се прикажува соодветна порака и се нуди опцијата за Retry на нивото или Exit на играта

<img src="https://drive.google.com/uc?export=view&id=1udjIt5ncBbxHhvxhcwvK0EdaDfURx6FJ" width="500" height="400" title="MoveSickPerson() code screenshot">

* **CheckHeroCollisions()** – со for-циклус ги изминува сите пречки присутни на површината на играта и проверува според растојанијата дали дошло до колизија, при што презема соодветни акции (пр. ако има колизија со дезинфекциско средство – собрал поен). Овде кодот за SickPerson е налик редундантен, но потребно е да се тестираат двете сценарија: што ако херојот се движи и се судри во заболен, и што ако заболениот при своето движење се удри во херојот, без тој да се придвижи. Дополнително, се проверува дали темнината го обземала во даден момент, при што нивото автоматски е изгубено, и дали херојот стигнал до целта (првично таа е неовозможена и е во вид на faded куќичка, па штом се соберат потребниот број на поени за конкретното ниво – таа станува обоена, односно овозможена)

<img src="https://drive.google.com/uc?export=view&id=1vXVK9yhnJImLIQOvsmPp3Aq3eAb9R7WH" width="350" height="400" title="CheckHeroCollisions() code screenshot1">
<img src="https://drive.google.com/uc?export=view&id=1jpuYhwpjxixnNyFFfyW2tahA2ltl0VEf" width="500" height="400" title="CheckHeroCollisions() code screenshot2">
<img src="https://drive.google.com/uc?export=view&id=1VW4H15_zhvSMidwVUUO3p5Ojv1X0DMDY" width="450" height="400" title="CheckHeroCollisions() code screenshot3">

* **CheckDarknessCollisions()** – се работи за речиси истиот код, со некои мали измени (овде нема никакви бенефити, како собирањето поени), и се повикува по секое зголемување на ширината на темнината

Понатаму, во класите Hero, SickPerson, Darkness, Disinfectant и Mask генерално се чуваат исти податоци - X и Y координатите, Image објект, метод Draw за исцртување на објектот, методи за движење и проверка на колизии. Во Hero дополнително се чуваат и бројот на животи, како и состојбата IsMasked, која кажува дали моментално херојот носи маска или не (ЗАБЕЛЕШКА: намерно не е дозволен ефектот на „маска врз маска“, бидејќи во тој случај играта би била прелесна). Мерењето на овој интервал е направено со помош на тајмерот PowerUp, при што доколку е активиран (херојот собрал маска), на неговиот Tick event се менува сликата од херој со маска во херој без маска и тајмерот се деактивира.

## Корисничко упатство
Со започнување на апликацијата се прикажува формата Menu во која има опција за започнување на игра, одбирање на ниво, читање на инструкции и отворање на веќе зачувана игра.

<img src="https://drive.google.com/uc?export=view&id=1JgBU8OsjL4GWfUB7XIp7RFEgMLoVNPV1" width="600" height="400" title="Main menu">

Доколку се притисне **CHOOSE LEVEL**, се прикажува формата LevelMenu. Тука можеме да одбереме едно од копчињата што ќе не однесе на соодветното ниво (доколку до истото сме стигнале, инаку по default се disabled).

<img src="https://drive.google.com/uc?export=view&id=18Axj1KCtm6ZvbG6yNclSCjmHo2iuxrYb" width="600" height="400" title="Choose level">

Со притискање на **HOW TO PLAY** се прикажува формата HowToPlay со краток опис на играта, запишан во RichTextBox.

<img src="https://drive.google.com/uc?export=view&id=1wuORCfPf5HbHYOElPKAxjui-WjLFcGxR" width="600" height="400" title="Instructions">

Со клик на копчето **START** се отвора формата Game. Играта започнува, се исцртува херојот, маските, дезинфекциските средства, животите (горе десно), куќичка како цел (долу десно), се прикажува лабела за поените (горе лево), моменталното ново и копче за пауза (горе средина). Од левата страна може да се забележи темнината, која се придвижува кон десно на одреден временски интервал, слично како и заболените човечиња од левата страна (тие се движат кон лево).

<img src="https://drive.google.com/uc?export=view&id=1cg77JcaCq1SwFfGOBso5iCDdaVxknSt_" width="700" height="400" title="Active game">

При паузирање на играта се прикажува следната форма, а сите движења во позадина се запираат. Притоа копчето за пауза се менува во знакот Play, доколку корисникот сака да продолжи каде што застанал. Понудени се опциите Save (дозволен е само еден клик на копчето – по зачувување станува disabled) и Quit (излез кон главното мени).

<img src="https://drive.google.com/uc?export=view&id=1rBa1OK3LoqKsMDqqhcVjvW5Ztp6re53V" width="700" height="400" title="Paused game">

На следната слика може да се воочи како иконата на херојот се менува со собирање на маска.

<img src="https://drive.google.com/uc?export=view&id=1wOFO-nWta5-8JNE3ny5UhE3a5XDztWBB" width="700" height="400" title="Masked hero">

Она што е навидум поразлично, а се со цел темата комплетно да е синхронизирана насекаде, ги креиравме овие custom message boxes, кои прикажуваат порака соодветно на состојбата на играта, како и нудат можност за повторување на нивото, премин кон следното, или пак излез кон главното мени. Овие message boxes се прикажани на наредните три слики.

Изгледот на формата Game, доколку корисникот изгуби поради судир со тројца заразени:

<img src="https://drive.google.com/uc?export=view&id=1ebWbkrLZ5m9XS52X8TQ06mY1VL3qIgNt" width="700" height="400" title="Level lost1">

Изгледот на формата Game, доколку корисникот изгуби поради судир со темнината:

<img src="https://drive.google.com/uc?export=view&id=10Yc-NKDLPUtEUhQDOBrkTrh94tySomRl" width="700" height="400" title="Level lost2">

Изгледот на формата Game, доколку корисникот го победи нивото:

<img src="https://drive.google.com/uc?export=view&id=1wXDqK6z-vPp7FnzuPbLIab1ASN8cH5AB" width="700" height="400" title="Level won">
